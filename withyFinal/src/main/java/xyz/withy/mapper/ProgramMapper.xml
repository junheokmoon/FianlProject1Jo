<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.withy.mapper.ProgramMapper">
<insert id="insertProgram">
		<selectKey resultType="int" keyProperty="programNo" order="BEFORE">
			select program_no_seq.nextval from program
		</selectKey>
		insert into program values(#{program_no}, #{program_ott_no},
			,#{program_name}, #{program_image},#{program_detail}, #{program_video}, #{program_category_no})
	</insert>
	
	<update id="updateProgram">
		update program set programOttNo=#{program_ott_no} ,programName=#{program_name}
			,programImage=#{program_image},programDetail=#{program_detail} ,programVideo=#{program_video}
				, programCategoryNo=#{program_category_no} where programNo=#{program_no}
	</update>
	
	<delete id="deleteProgram">
		delete from program where programNo=#{program_no}
	</delete>

	<select id="selectProgram" resultType="ProgramDTO">
		select programOttNo, programName ,programImage ,programDetail 
			,programVideo ,programCategoryNo from program where programNo=#{program_no}
	</select>

	<select id="selectProgramCount" resultType="int">
		select count(*) from program
	</select>

	<select id="selectProgramList" resultType="ProgramDTO">
		select * from (select rownum rn, program.* from (select programOttNo
			,programName ,programImage ,programDetail ,programVideo ,programCategoryNo
			from program order by programNo desc) program) where rn between #{startRow} and #{endRow}
	</select>
	
</mapper>